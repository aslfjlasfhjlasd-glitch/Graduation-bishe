import{c,_ as pt,r as m,y as M,q as mt,s as ht,a as k,o as x,d as l,b as e,h as i,u as n,z as xt,R as vt,n as C,f as I,g as T,M as ft,e as o,t as r,V as gt,A as yt,T as bt,F as U,B as kt,$ as _t,P as wt,C as Mt,I as Ct,i as j,D as It,x as E,E as St,G as zt,p as $t,k as At}from"./index-C8FpXlZk.js";import{U as Z,C as Nt}from"./users-CpLI_Nfp.js";import{A as Tt}from"./Dashboard-wlwJxA1g.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=c("AlertCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=c("BookOpenIcon",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=c("Building2Icon",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=c("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=c("CalendarXIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=c("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=c("CheckCircle2Icon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=c("FlagIcon",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=c("HeartPulseIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=c("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=c("LeafIcon",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=c("MapPinIcon",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=c("ShieldCheckIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=c("SparklesIcon",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Ft={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ot={class:"flex items-center gap-3"},Ut={class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-tr from-blue-600 via-cyan-500 to-emerald-500 text-white shadow"},Et={class:"flex items-center text-slate-700 gap-2"},Zt={class:"text-[0.95rem]"},Rt={class:"flex items-center text-slate-700 gap-2"},Xt={class:"text-[0.95rem]"},Gt={class:"flex items-center text-slate-700 gap-2"},Jt={class:"text-[0.95rem]"},Yt={class:"flex items-center gap-3 pt-2"},Kt={class:"absolute bottom-4 right-4"},Qt={class:"p-6 flex items-center gap-3"},Wt={class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 text-white"},te={key:0,class:"py-12 text-center text-slate-500"},ee={key:1,class:"py-12 text-center text-red-500"},se={key:2,class:"mt-4 px-6 pb-6 grid grid-cols-1 gap-3"},ae={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},le={class:"text-sm text-slate-700"},ne={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},oe={class:"text-sm text-slate-700"},re={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},de={class:"text-sm text-slate-700"},ie={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},ce={class:"text-sm text-slate-700"},ue={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},pe={class:"text-sm text-slate-700"},me={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},he={class:"text-sm text-slate-700"},xe={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},ve={class:"text-sm text-slate-700"},fe={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},ge={class:"text-sm text-slate-700"},ye={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},be={class:"text-sm text-slate-700"},ke={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},_e={class:"text-sm text-slate-700"},we={class:"px-6 pb-6 flex justify-end"},Me={__name:"ActivityHall",setup(Ce){const L="http://localhost:8080",Y={Leaf:Vt,BookOpen:R,HeartPulse:Pt,Sparkles:D},K=a=>{const t=String(a||"");return/(环保|环境|垃圾|绿|生态)/.test(t)?"Leaf":/(教育|简历|咨询|大赛|毕业|迎新|开学|学院|课堂)/.test(t)?"BookOpen":/(医疗|献血|健康|体质|医|医院|心理)/.test(t)?"HeartPulse":"Sparkles"},f=m([]),H=m(!1),_=m(!1),S=m(!1),q=m(null),d=m(null),w=m(!1),P=m(""),V=m(""),Q=async()=>{H.value=!0;try{const a=await E.get(`${L}/api/dashboard/activities`);if(a.data&&a.data.code===200){const t=Array.isArray(a.data.data)?a.data.data:[];f.value=t.map(s=>({id:Number(s.id),hdmc:String(s.hdmc||""),bmsj:String(s.bmsj||""),hdsj:String(s.hdsj||""),hddd:String(s.hddd||""),zyrs:String(s.zyrs||""),icon:K(s.hdmc)})),O()}else f.value=[]}catch{f.value=[]}finally{H.value=!1}},W=async a=>{q.value=a,_.value=!0,S.value=!0,d.value=null;try{const t=await E.get(`${L}/api/dashboard/activities/${a}`);t.data&&t.data.code===200?d.value=t.data.data||null:d.value=null}catch{d.value=null}finally{S.value=!1}};let z=null;const v=m("info"),tt=M(()=>v.value==="success"?Ht:jt),et=M(()=>v.value==="success"?"bg-emerald-50 border border-emerald-200":v.value==="error"?"bg-rose-50 border border-rose-200":"bg-white border border-slate-200"),st=M(()=>v.value==="success"?"font-semibold text-emerald-800":v.value==="error"?"font-semibold text-rose-800":"font-semibold text-slate-800"),at=M(()=>v.value==="success"?"text-emerald-700 text-sm":v.value==="error"?"text-rose-700 text-sm":"text-slate-500 text-sm"),g=(a,t,s)=>{v.value=a,P.value=t,V.value="",w.value=!0,z&&clearTimeout(z),z=setTimeout(()=>{w.value=!1},2500)},lt=a=>!1,nt=a=>a.status==="报名未开始"?g("error","报名失败，报名未开始"):a.status==="活动未开始"?g("error","报名失败，活动未开始"):a.status==="活动已结束"?g("error","报名失败，活动已结束"):a.status==="报名已满"||lt()?g("error","报名失败，名额已满"):g("success",`报名成功：${a.hdmc}`),ot=()=>{const a=new Date;return new Date(a.getTime()+(480+a.getTimezoneOffset())*6e4)},y=a=>{const t=a.match(/(?:(\d{4})-)?(\d{2})-(\d{2})\s+(\d{2}):(\d{2})/);if(!t)return null;const s=t[1]?Number(t[1]):void 0,h=Number(t[2]),u=Number(t[3]),p=Number(t[4]),b=Number(t[5]),A=s??new Date().getFullYear(),N=Date.UTC(A,h-1,u,p-8,b,0);return new Date(N)},F=a=>{if(!a)return[null,null];const t=String(a);if(t.includes("至")){const u=t.split("至"),p=y(u[0].trim()),b=y(u[1].trim());return[p,b]}const s=t.match(/(\d{4}-\d{2}-\d{2})\s+(\d{2}):(\d{2})\s*-\s*(\d{2}):(\d{2})/);if(s){const u=s[1],p=Number(s[2]),b=Number(s[3]),A=Number(s[4]),N=Number(s[5]),ct=y(`${u} ${String(p).padStart(2,"0")}:${String(b).padStart(2,"0")}`),ut=y(`${u} ${String(A).padStart(2,"0")}:${String(N).padStart(2,"0")}`);return[ct,ut]}return[y(t.trim()),null]},rt={报名未开始:Nt,报名进行中:Dt,报名已结束:Lt,活动进行中:Tt,活动已结束:qt},dt={报名未开始:"bg-slate-100 text-slate-700",报名进行中:"bg-green-100 text-green-700",报名已结束:"bg-amber-100 text-amber-700",活动进行中:"bg-emerald-100 text-emerald-700",活动已结束:"bg-slate-200 text-slate-700"},it=a=>{const t=ot(),[s,h]=F(a.bmsj),[u,p]=F(a.hdsj);return s&&t<s?"报名未开始":s&&h&&t>=s&&t<=h?"报名进行中":h&&u&&t>h&&t<u?"活动未开始":u&&p&&t>=u&&t<=p?"活动进行中":p&&t>p?"活动已结束":"报名进行中"},O=()=>{f.value=f.value.map(a=>{const t=it(a);return{...a,status:t}})};let $=null;return mt(async()=>{await Q(),$=setInterval(O,6e4)}),ht(()=>{$&&clearInterval($)}),(a,t)=>(x(),k(U,null,[l(n(bt),null,{default:i(()=>[l(n(xt),{class:"fixed top-4 right-4 z-50"}),l(n(vt),{open:w.value,"onUpdate:open":t[0]||(t[0]=s=>w.value=s),class:C([et.value,"rounded-md shadow-lg p-4 pr-10 flex items-start gap-3"])},{default:i(()=>[(x(),I(T(tt.value),{class:"w-5 h-5"})),e("div",null,[l(n(ft),{class:C(st.value)},{default:i(()=>[o(r(P.value),1)]),_:1},8,["class"]),l(n(gt),{class:C(at.value)},{default:i(()=>[o(r(V.value),1)]),_:1},8,["class"])]),l(n(yt),{class:"absolute right-2 top-2 text-slate-400"},{default:i(()=>[...t[3]||(t[3]=[o("×",-1)])]),_:1})]),_:1},8,["open","class"])]),_:1}),e("div",Ft,[(x(!0),k(U,null,kt(f.value,s=>(x(),I(n(At),{key:s.id,class:"group relative bg-white border border-slate-200/70 shadow-sm hover:shadow-lg rounded-2xl transition-all duration-300 hover:scale-[1.02] ring-1 ring-white/40 min-h-[260px] md:min-h-[300px]"},{default:i(()=>[l(n(St),{class:"pb-3 px-6 pt-5"},{default:i(()=>[e("div",Ot,[e("span",Ut,[(x(),I(T(Y[s.icon]),{class:"w-5 h-5"}))]),l(n(zt),{class:"text-slate-900 text-lg"},{default:i(()=>[o(r(s.hdmc),1)]),_:2},1024)])]),_:2},1024),l(n($t),{class:"space-y-4 px-6 pb-14"},{default:i(()=>[e("div",Et,[l(n(B),{class:"w-5 h-5 text-blue-600"}),e("span",Zt,r(s.bmsj),1)]),e("div",Rt,[l(n(G),{class:"w-5 h-5 text-emerald-600"}),e("span",Xt,r(s.hddd),1)]),e("div",Gt,[l(n(Z),{class:"w-5 h-5 text-cyan-600"}),e("span",Jt,r(s.zyrs),1)]),e("div",Yt,[l(j,{variant:"default",class:"group gap-2",onClick:h=>W(s.id)},{default:i(()=>[t[4]||(t[4]=e("span",null,"查看详情",-1)),l(n(X),{class:"w-4 h-4 transition-transform group-hover:translate-x-0.5"})]),_:1},8,["onClick"]),l(j,{variant:"secondary",class:"group",onClick:h=>nt(s)},{default:i(()=>[...t[5]||(t[5]=[o("报名",-1)])]),_:1},8,["onClick"])])]),_:2},1024),e("div",Kt,[e("span",{class:C(["inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-xs md:text-sm font-medium shadow-sm transition-colors duration-300",dt[s.status]])},[(x(),I(T(rt[s.status]),{class:"w-4 h-4"})),e("span",null,r(s.status),1)],2)])]),_:2},1024))),128))]),l(n(It),{open:_.value,"onUpdate:open":t[2]||(t[2]=s=>_.value=s)},{default:i(()=>[l(n(_t),{class:"fixed inset-0 bg-slate-900/30 backdrop-blur-[6px]"}),l(n(wt),{class:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-2xl bg-white/80 backdrop-blur-xl border border-white/40 rounded-xl shadow-2xl p-0 z-50"},{default:i(()=>[t[18]||(t[18]=e("div",{class:"h-1.5 w-full bg-gradient-to-r from-blue-600 via-cyan-500 to-emerald-500 rounded-t-xl"},null,-1)),e("div",Qt,[e("span",Wt,[l(n(X),{class:"w-4 h-4"})]),l(n(Mt),{class:"text-xl font-semibold text-slate-900"},{default:i(()=>[...t[6]||(t[6]=[o("活动详情",-1)])]),_:1})]),l(n(Ct),{class:"px-6 -mt-2 text-slate-600 text-sm"},{default:i(()=>{var s;return[o("编号 "+r(((s=d.value)==null?void 0:s.id)??q.value),1)]}),_:1}),S.value?(x(),k("div",te,"加载中...")):d.value?(x(),k("div",se,[e("div",ae,[l(n(D),{class:"w-4 h-4 text-indigo-600"}),e("div",le,[t[7]||(t[7]=e("span",{class:"font-medium"},"活动名称：",-1)),o(r(d.value.hdmc),1)])]),e("div",ne,[l(n(B),{class:"w-4 h-4 text-blue-600"}),e("div",oe,[t[8]||(t[8]=e("span",{class:"font-medium"},"报名时间：",-1)),o(r(d.value.bmsj),1)])]),e("div",re,[l(n(B),{class:"w-4 h-4 text-blue-600"}),e("div",de,[t[9]||(t[9]=e("span",{class:"font-medium"},"活动时间：",-1)),o(r(d.value.hdsj),1)])]),e("div",ie,[l(n(G),{class:"w-4 h-4 text-emerald-600"}),e("div",ce,[t[10]||(t[10]=e("span",{class:"font-medium"},"活动地点：",-1)),o(r(d.value.hddd),1)])]),e("div",ue,[l(n(Z),{class:"w-4 h-4 text-cyan-600"}),e("div",pe,[t[11]||(t[11]=e("span",{class:"font-medium"},"招募人数：",-1)),o(r(d.value.zyrs),1)])]),e("div",me,[l(n(R),{class:"w-4 h-4 text-purple-600"}),e("div",he,[t[12]||(t[12]=e("span",{class:"font-medium"},"活动内容：",-1)),o(r(d.value.hdnr),1)])]),e("div",xe,[l(n(J),{class:"w-4 h-4 text-rose-600"}),e("div",ve,[t[13]||(t[13]=e("span",{class:"font-medium"},"活动需求条件：",-1)),o(r(d.value.hdxq),1)])]),e("div",fe,[l(n(J),{class:"w-4 h-4 text-rose-600"}),e("div",ge,[t[14]||(t[14]=e("span",{class:"font-medium"},"活动保障：",-1)),o(r(d.value.hdbz),1)])]),e("div",ye,[l(n(Bt),{class:"w-4 h-4 text-slate-700"}),e("div",be,[t[15]||(t[15]=e("span",{class:"font-medium"},"发起单位：",-1)),o(r(d.value.hdfqdw),1)])]),e("div",ke,[l(n(D),{class:"w-4 h-4 text-indigo-600"}),e("div",_e,[t[16]||(t[16]=e("span",{class:"font-medium"},"状态：",-1)),o(r(d.value.hdzt),1)])])])):(x(),k("div",ee,"未获取到详情")),e("div",we,[l(j,{variant:"outline",onClick:t[1]||(t[1]=s=>_.value=!1)},{default:i(()=>[...t[17]||(t[17]=[o("关闭",-1)])]),_:1})])]),_:1})]),_:1},8,["open"])],64))}},$e=pt(Me,[["__scopeId","data-v-39ca955e"]]);export{$e as default};
