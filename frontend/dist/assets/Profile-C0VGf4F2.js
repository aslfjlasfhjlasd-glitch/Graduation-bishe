import{c as _,_ as ee,r as f,y as se,q as te,a as r,o as i,d as l,b as s,h as n,J as k,n as z,f as le,g as ae,u as a,t as p,K as oe,e as c,E as V,G as q,p as D,L as h,w as N,F as C,B as j,N as ne,k as S,O as F,i as M,Q as ue,x as K}from"./index-5loqbwf5.js";import{C as ie,A as X,I as re}from"./info-wHuxTJg0.js";import{U as de}from"./Dashboard-CuOdj5sY.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=_("AwardIcon",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=_("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=_("PhoneIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=_("SaveIcon",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=_("TagIcon",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=_("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fe={class:"space-y-6 animate-in fade-in duration-500"},ge={class:"mb-8"},he={class:"text-slate-500 mt-2 text-sm font-medium flex items-center gap-2"},be={key:0,class:"flex justify-center items-center py-20"},ye={key:1,class:"grid gap-6"},we={class:"space-y-2"},_e={class:"space-y-2"},ke={class:"space-y-2"},ze={class:"space-y-2"},Ce={class:"space-y-2"},je={class:"space-y-2"},Ie=["value"],Ve={key:0,class:"text-xs text-rose-600 flex items-center gap-1"},qe={class:"space-y-2 md:col-span-2"},De={class:"text-sm font-medium text-slate-700 flex items-center gap-2"},Se={key:0,class:"text-xs text-rose-600 flex items-center gap-1"},Be={class:"flex flex-wrap gap-2"},Me=["onClick"],Xe={class:"flex gap-2"},$e={key:0,class:"space-y-2"},Pe={class:"flex flex-wrap gap-2"},Te=["onClick"],Ae={class:"flex flex-wrap gap-2"},Oe=["onClick"],Ue={class:"flex gap-2"},He={key:0,class:"space-y-2"},Ne={class:"flex flex-wrap gap-2"},Fe=["onClick"],Ke={class:"text-xs text-slate-500 mt-2 text-right"},Le={class:"flex justify-end gap-4"},Ee={__name:"Profile",setup(Re){const $="http://localhost:8080",o=f({xsXh:null,xsXm:"",xsXb:"",zzmm:"",xsDh:"",ssXy:"",bjMc:"",xqBq:"",jnBq:"",grjj:""}),E=["环保公益","教育支教","社区服务","文化传承","体育健康","科技创新","艺术表演","国际交流","敬老助残","应急救援"],R=["组织协调","沟通表达","文案写作","摄影摄像","外语翻译","计算机技能","医疗急救","文艺表演","体育运动","手工制作"],P=["群众","共青团员","中共党员"],m=f([]),v=f([]),b=f(""),y=f(""),B=f(!1),I=f(!1),d=f({show:!1,type:"info",message:""}),x=f({xsDh:"",zzmm:""}),w=(u,e)=>{d.value={show:!0,type:u,message:e},setTimeout(()=>{d.value.show=!1},3e3)},T=async()=>{B.value=!0;try{const u=localStorage.getItem("studentId")||2024104,e=await K.get(`${$}/api/student/profile`,{params:{studentId:u}});e.data.code===200?(o.value=e.data.data,o.value.xqBq&&(m.value=o.value.xqBq.split(",").filter(t=>t.trim())),o.value.jnBq&&(v.value=o.value.jnBq.split(",").filter(t=>t.trim()))):w("error","加载学生信息失败："+e.data.message)}catch(u){console.error("加载学生信息失败",u),w("error","加载学生信息失败，请稍后重试")}finally{B.value=!1}},G=u=>{const e=m.value.indexOf(u);e>-1?m.value.splice(e,1):m.value.push(u)},J=u=>{const e=v.value.indexOf(u);e>-1?v.value.splice(e,1):v.value.push(u)},A=()=>{b.value.trim()&&!m.value.includes(b.value.trim())&&(m.value.push(b.value.trim()),b.value="")},O=()=>{y.value.trim()&&!v.value.includes(y.value.trim())&&(v.value.push(y.value.trim()),y.value="")},Q=u=>{const e=m.value.indexOf(u);e>-1&&m.value.splice(e,1)},Z=u=>{const e=v.value.indexOf(u);e>-1&&v.value.splice(e,1)},U=()=>o.value.xsDh?/^1[3-9]\d{9}$/.test(o.value.xsDh)?(x.value.xsDh="",!0):(x.value.xsDh="请输入正确的手机号码格式",!1):(x.value.xsDh="",!0),H=()=>o.value.zzmm?P.includes(o.value.zzmm)?(x.value.zzmm="",!0):(x.value.zzmm="请选择有效的政治面貌",!1):(x.value.zzmm="",!0),W=async()=>{const u=U(),e=H();if(!u||!e){w("error","请检查表单填写是否正确");return}I.value=!0;try{const t={xsXh:o.value.xsXh,zzmm:o.value.zzmm,xsDh:o.value.xsDh,xqBq:m.value.join(","),jnBq:v.value.join(","),grjj:o.value.grjj},g=await K.put(`${$}/api/student/profile`,t);g.data.code===200?(w("success","个人信息保存成功"),await T()):w("error","保存失败："+g.data.message)}catch(t){console.error("保存个人信息失败",t),w("error","保存失败，请稍后重试")}finally{I.value=!1}},Y=se(()=>o.value.xsXb==="1"?"男":o.value.xsXb==="0"?"女":"未知");return te(()=>{T()}),(u,e)=>(i(),r("div",fe,[l(oe,{name:"toast"},{default:n(()=>[d.value.show?(i(),r("div",{key:0,class:z(["fixed left-1/2 -translate-x-1/2 top-20 z-50 rounded-lg shadow-lg p-4 pr-10 flex items-start gap-3 min-w-[320px]",d.value.type==="success"?"bg-emerald-50 border border-emerald-200":"",d.value.type==="error"?"bg-rose-50 border border-rose-200":"",d.value.type==="info"?"bg-blue-50 border border-blue-200":""])},[(i(),le(ae(d.value.type==="success"?a(ie):a(X)),{class:z(["w-5 h-5",d.value.type==="success"?"text-emerald-600":"",d.value.type==="error"?"text-rose-600":"",d.value.type==="info"?"text-blue-600":""])},null,8,["class"])),s("div",null,[s("div",{class:z(["font-semibold",d.value.type==="success"?"text-emerald-800":"",d.value.type==="error"?"text-rose-800":"",d.value.type==="info"?"text-blue-800":""])},p(d.value.message),3)])],2)):k("",!0)]),_:1}),s("div",ge,[e[6]||(e[6]=s("h1",{class:"text-3xl font-bold text-slate-800 tracking-tight"},"个人信息",-1)),s("p",he,[l(a(re),{class:"w-4 h-4"}),e[5]||(e[5]=c(" 您可以编辑政治面貌、联系电话、兴趣标签、技能标签和个人简介 ",-1))])]),B.value?(i(),r("div",be,[...e[7]||(e[7]=[s("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(i(),r("div",ye,[l(a(S),{class:"hover:shadow-lg transition-shadow duration-300"},{default:n(()=>[l(a(V),null,{default:n(()=>[l(a(q),{class:"flex items-center gap-2 text-xl"},{default:n(()=>[l(a(de),{class:"w-5 h-5 text-blue-600"}),e[8]||(e[8]=c(" 基本信息 ",-1))]),_:1})]),_:1}),l(a(D),{class:"grid gap-6 md:grid-cols-2"},{default:n(()=>[s("div",we,[e[9]||(e[9]=s("label",{class:"text-sm font-medium text-slate-700"},"学号",-1)),l(h,{"model-value":o.value.xsXh,disabled:"",class:"bg-slate-50 text-slate-600"},null,8,["model-value"])]),s("div",_e,[e[10]||(e[10]=s("label",{class:"text-sm font-medium text-slate-700"},"姓名",-1)),l(h,{"model-value":o.value.xsXm,disabled:"",class:"bg-slate-50 text-slate-600"},null,8,["model-value"])]),s("div",ke,[e[11]||(e[11]=s("label",{class:"text-sm font-medium text-slate-700"},"性别",-1)),l(h,{"model-value":Y.value,disabled:"",class:"bg-slate-50 text-slate-600"},null,8,["model-value"])]),s("div",ze,[e[12]||(e[12]=s("label",{class:"text-sm font-medium text-slate-700"},"所属学院",-1)),l(h,{"model-value":o.value.ssXy,disabled:"",class:"bg-slate-50 text-slate-600"},null,8,["model-value"])]),s("div",Ce,[e[13]||(e[13]=s("label",{class:"text-sm font-medium text-slate-700"},"班级",-1)),l(h,{"model-value":o.value.bjMc,disabled:"",class:"bg-slate-50 text-slate-600"},null,8,["model-value"])]),s("div",je,[e[15]||(e[15]=s("label",{class:"text-sm font-medium text-slate-700"},[c("政治面貌 "),s("span",{class:"text-rose-500"},"*")],-1)),N(s("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.zzmm=t),onChange:H,class:"flex h-11 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[14]||(e[14]=s("option",{value:""},"请选择政治面貌",-1)),(i(),r(C,null,j(P,t=>s("option",{key:t,value:t},p(t),9,Ie)),64))],544),[[ne,o.value.zzmm]]),x.value.zzmm?(i(),r("p",Ve,[l(a(X),{class:"w-3 h-3"}),c(" "+p(x.value.zzmm),1)])):k("",!0)]),s("div",qe,[s("label",De,[l(a(ve),{class:"w-4 h-4"}),e[16]||(e[16]=c(" 联系电话 ",-1)),e[17]||(e[17]=s("span",{class:"text-rose-500"},"*",-1))]),l(h,{modelValue:o.value.xsDh,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.xsDh=t),placeholder:"请输入11位手机号码",onBlur:U,class:"h-11"},null,8,["modelValue"]),x.value.xsDh?(i(),r("p",Se,[l(a(X),{class:"w-3 h-3"}),c(" "+p(x.value.xsDh),1)])):k("",!0)])]),_:1})]),_:1}),l(a(S),{class:"hover:shadow-lg transition-shadow duration-300"},{default:n(()=>[l(a(V),null,{default:n(()=>[l(a(q),{class:"flex items-center gap-2 text-xl"},{default:n(()=>[l(a(pe),{class:"w-5 h-5 text-purple-600"}),e[18]||(e[18]=c(" 兴趣标签 ",-1))]),_:1}),e[19]||(e[19]=s("p",{class:"text-sm text-slate-500 mt-2"},"选择或添加您感兴趣的志愿活动类型",-1))]),_:1}),l(a(D),{class:"space-y-4"},{default:n(()=>[s("div",Be,[(i(),r(C,null,j(E,t=>s("button",{key:t,onClick:g=>G(t),class:z(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",m.value.includes(t)?"bg-purple-600 text-white shadow-md hover:bg-purple-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"])},p(t),11,Me)),64))]),s("div",Xe,[l(h,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=t=>b.value=t),placeholder:"输入自定义兴趣标签",onKeyup:F(A,["enter"]),class:"flex-1"},null,8,["modelValue"]),l(M,{onClick:A,variant:"outline"},{default:n(()=>[...e[20]||(e[20]=[c("添加",-1)])]),_:1})]),m.value.length>0?(i(),r("div",$e,[e[21]||(e[21]=s("p",{class:"text-sm font-medium text-slate-700"},"已选标签：",-1)),s("div",Pe,[(i(!0),r(C,null,j(m.value,t=>(i(),r("span",{key:t,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-700"},[c(p(t)+" ",1),s("button",{onClick:g=>Q(t),class:"hover:text-purple-900"},[l(a(L),{class:"w-3 h-3"})],8,Te)]))),128))])])):k("",!0)]),_:1})]),_:1}),l(a(S),{class:"hover:shadow-lg transition-shadow duration-300"},{default:n(()=>[l(a(V),null,{default:n(()=>[l(a(q),{class:"flex items-center gap-2 text-xl"},{default:n(()=>[l(a(ce),{class:"w-5 h-5 text-emerald-600"}),e[22]||(e[22]=c(" 技能标签 ",-1))]),_:1}),e[23]||(e[23]=s("p",{class:"text-sm text-slate-500 mt-2"},"选择或添加您擅长的技能",-1))]),_:1}),l(a(D),{class:"space-y-4"},{default:n(()=>[s("div",Ae,[(i(),r(C,null,j(R,t=>s("button",{key:t,onClick:g=>J(t),class:z(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",v.value.includes(t)?"bg-emerald-600 text-white shadow-md hover:bg-emerald-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"])},p(t),11,Oe)),64))]),s("div",Ue,[l(h,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=t=>y.value=t),placeholder:"输入自定义技能标签",onKeyup:F(O,["enter"]),class:"flex-1"},null,8,["modelValue"]),l(M,{onClick:O,variant:"outline"},{default:n(()=>[...e[24]||(e[24]=[c("添加",-1)])]),_:1})]),v.value.length>0?(i(),r("div",He,[e[25]||(e[25]=s("p",{class:"text-sm font-medium text-slate-700"},"已选标签：",-1)),s("div",Ne,[(i(!0),r(C,null,j(v.value,t=>(i(),r("span",{key:t,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm bg-emerald-100 text-emerald-700"},[c(p(t)+" ",1),s("button",{onClick:g=>Z(t),class:"hover:text-emerald-900"},[l(a(L),{class:"w-3 h-3"})],8,Fe)]))),128))])])):k("",!0)]),_:1})]),_:1}),l(a(S),{class:"hover:shadow-lg transition-shadow duration-300"},{default:n(()=>[l(a(V),null,{default:n(()=>[l(a(q),{class:"flex items-center gap-2 text-xl"},{default:n(()=>[l(a(me),{class:"w-5 h-5 text-blue-600"}),e[26]||(e[26]=c(" 个人简介 ",-1))]),_:1}),e[27]||(e[27]=s("p",{class:"text-sm text-slate-500 mt-2"},"介绍一下您自己，最多500字",-1))]),_:1}),l(a(D),null,{default:n(()=>{var t;return[N(s("textarea",{"onUpdate:modelValue":e[4]||(e[4]=g=>o.value.grjj=g),placeholder:"请输入个人简介，包括您的特长、经历、志愿服务意愿等...",maxlength:"500",rows:"8",class:"flex w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-none"},null,512),[[ue,o.value.grjj]]),s("p",Ke,p(((t=o.value.grjj)==null?void 0:t.length)||0)+" / 500 ",1)]}),_:1})]),_:1}),s("div",Le,[l(M,{onClick:W,disabled:I.value,class:"gap-2 px-8 h-11 text-base"},{default:n(()=>[l(a(xe),{class:"w-4 h-4"}),c(" "+p(I.value?"保存中...":"保存信息"),1)]),_:1},8,["disabled"])])]))]))}},Ze=ee(Ee,[["__scopeId","data-v-e26fbc3e"]]);export{Ze as default};
