import{c as _,r as h,q as z,s as P,a as C,o as I,b as e,d as s,h as i,u as a,p as c,t as b,k as f,l as g,x as O}from"./index-CAWYbXwK.js";import{A as B}from"./Dashboard-xXRipBWE.js";import{U as V,C as D}from"./users-DbP5xCHz.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=_("BarChartIcon",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=_("PieChartIcon",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=_("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),G={class:"space-y-6 animate-in fade-in duration-500"},H={class:"grid gap-6 md:grid-cols-3"},M={class:"flex items-center justify-between"},N={class:"mt-2 flex items-baseline gap-2"},W={class:"text-3xl font-bold text-slate-800"},$={class:"p-3 bg-blue-50 rounded-xl"},q={class:"flex items-center justify-between"},F={class:"mt-2 flex items-baseline gap-2"},J={class:"text-3xl font-bold text-slate-800"},K={class:"p-3 bg-purple-50 rounded-xl"},Q={class:"flex items-center justify-between"},X={class:"mt-2 flex items-baseline gap-2"},Y={class:"text-3xl font-bold text-slate-800"},Z={class:"p-3 bg-emerald-50 rounded-xl"},ee={class:"grid gap-6 md:grid-cols-12 h-[400px]"},te={class:"flex items-center gap-2 mb-4"},se={class:"flex items-center gap-2 mb-4"},ae={class:"flex items-center justify-between mb-6"},le={class:"flex items-center gap-2"},ce={__name:"DashboardHome",setup(oe){const L="http://localhost:8080",p=h(null),u=h(null),x=h(null);let n=null,o=null,r=null;const m={totalActivities:128,activeVolunteers:356,totalHours:12450},A=async()=>{if(!p.value)return;const d=await g(()=>import("./index-C2GE3DAF.js"),[]);n=d.init(p.value);const t={tooltip:{trigger:"axis"},legend:{data:["活动数量","参与人数"],bottom:0},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["7月","8月","9月","10月","11月","12月"]},yAxis:{type:"value"},series:[{name:"活动数量",type:"line",smooth:!0,data:[12,15,25,30,28,35],itemStyle:{color:"#2563eb"},areaStyle:{color:new d.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(37, 99, 235, 0.3)"},{offset:1,color:"rgba(37, 99, 235, 0)"}])}},{name:"参与人数",type:"line",smooth:!0,data:[120,150,380,420,390,510],itemStyle:{color:"#10b981"},areaStyle:{color:new d.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(16, 185, 129, 0.3)"},{offset:1,color:"rgba(16, 185, 129, 0)"}])}}]};n.setOption(t)},R=async()=>{var t,y;if(!u.value)return;o=(await g(()=>import("./index-C2GE3DAF.js"),[])).init(u.value);try{o.showLoading({text:"加载中...",color:"#6b7280"})}catch{}try{const l=await O.get(`${L}/api/dashboard/academy-stats`);let w=[];l.data.code===200?w=(Array.isArray(l.data.data)?l.data.data:[]).map(k=>({name:String(k.name??""),value:Number(k.value??0)})):console.error("获取学院数据失败:",l.data.message);const E={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{show:!1},series:[{name:"参与度占比",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!1},data:w}]};o.setOption(E);try{o.hideLoading()}catch{}}catch(l){console.error("学院参与度接口异常",{message:l==null?void 0:l.message,status:(t=l==null?void 0:l.response)==null?void 0:t.status,data:(y=l==null?void 0:l.response)==null?void 0:y.data});try{o.hideLoading()}catch{}o.setOption({title:{text:"数据加载失败",left:"center",top:"center",textStyle:{color:"red"}},series:[{type:"pie",data:[]}]})}},S=async()=>{if(!x.value)return;const d=await g(()=>import("./index-C2GE3DAF.js"),[]);r=d.init(x.value);const t={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:["7月","8月","9月","10月","11月","12月"],axisLabel:{interval:0}},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{name:"参与率",type:"bar",barWidth:"40%",data:[65,70,85,88,82,92],itemStyle:{color:new d.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#6366f1"},{offset:1,color:"#8b5cf6"}]),borderRadius:[4,4,0,0]},label:{show:!0,position:"top",formatter:"{c}%"}}]};r.setOption(t)},v=()=>{n==null||n.resize(),o==null||o.resize(),r==null||r.resize()};return z(async()=>{await A(),await R(),await S(),window.addEventListener("resize",v)}),P(()=>{window.removeEventListener("resize",v),n==null||n.dispose(),o==null||o.dispose(),r==null||r.dispose()}),(d,t)=>(I(),C("div",G,[t[10]||(t[10]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-slate-800 tracking-tight"},"志愿活动数据可视化大屏"),e("p",{class:"text-slate-500 mt-2 text-sm font-medium"},"实时数据查看与分析")],-1)),e("div",H,[s(a(f),{class:"hover:shadow-lg transition-shadow duration-300 border-l-4 border-l-blue-500"},{default:i(()=>[s(a(c),{class:"p-6"},{default:i(()=>[e("div",M,[e("div",null,[t[1]||(t[1]=e("p",{class:"text-sm font-medium text-slate-500"},"累计活动数量",-1)),e("div",N,[e("span",W,b(m.totalActivities),1),t[0]||(t[0]=e("span",{class:"text-xs text-green-600 font-medium"},"+12%",-1))])]),e("div",$,[s(a(B),{class:"w-6 h-6 text-blue-600"})])])]),_:1})]),_:1}),s(a(f),{class:"hover:shadow-lg transition-shadow duration-300 border-l-4 border-l-purple-500"},{default:i(()=>[s(a(c),{class:"p-6"},{default:i(()=>[e("div",q,[e("div",null,[t[3]||(t[3]=e("p",{class:"text-sm font-medium text-slate-500"},"活跃志愿者",-1)),e("div",F,[e("span",J,b(m.activeVolunteers),1),t[2]||(t[2]=e("span",{class:"relative flex h-2 w-2"},[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})],-1))])]),e("div",K,[s(a(V),{class:"w-6 h-6 text-purple-600"})])])]),_:1})]),_:1}),s(a(f),{class:"hover:shadow-lg transition-shadow duration-300 border-l-4 border-l-emerald-500"},{default:i(()=>[s(a(c),{class:"p-6"},{default:i(()=>[e("div",Q,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-slate-500"},"累计活动时长",-1)),e("div",X,[e("span",Y,b((m.totalHours/1e3).toFixed(1))+"k",1),t[4]||(t[4]=e("span",{class:"text-sm text-slate-400"},"小时",-1))])]),e("div",Z,[s(a(D),{class:"w-6 h-6 text-emerald-600"})])])]),_:1})]),_:1})]),e("div",ee,[s(a(f),{class:"md:col-span-7 lg:col-span-8 hover:shadow-lg transition-shadow duration-300 flex flex-col"},{default:i(()=>[s(a(c),{class:"p-6 flex-1 flex flex-col"},{default:i(()=>[e("div",te,[s(a(j),{class:"w-5 h-5 text-blue-600"}),t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-slate-800"},"近半年活动趋势",-1))]),e("div",{ref_key:"lineChartRef",ref:p,class:"w-full flex-1 min-h-[300px]"},null,512)]),_:1})]),_:1}),s(a(f),{class:"md:col-span-5 lg:col-span-4 hover:shadow-lg transition-shadow duration-300 flex flex-col"},{default:i(()=>[s(a(c),{class:"p-6 flex-1 flex flex-col"},{default:i(()=>[e("div",se,[s(a(U),{class:"w-5 h-5 text-purple-600"}),t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-slate-800"},"各学院参与度占比",-1))]),e("div",{ref_key:"pieChartRef",ref:u,class:"w-full flex-1 min-h-[300px]"},null,512)]),_:1})]),_:1})]),s(a(f),{class:"hover:shadow-lg transition-shadow duration-300"},{default:i(()=>[s(a(c),{class:"p-6"},{default:i(()=>[e("div",ae,[e("div",le,[s(a(T),{class:"w-5 h-5 text-indigo-600"}),t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-slate-800"},"近半年活动参与率",-1))]),t[9]||(t[9]=e("select",{class:"text-sm border-slate-200 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"},[e("option",null,"最近6个月"),e("option",null,"最近12个月")],-1))]),e("div",{ref_key:"barChartRef",ref:x,class:"w-full h-[300px]"},null,512)]),_:1})]),_:1})]))}};export{ce as default};
