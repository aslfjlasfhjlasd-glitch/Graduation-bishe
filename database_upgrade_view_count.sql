-- ============================================
-- 智能推荐算法升级 - 浏览次数功能
-- 数据库升级脚本
-- ============================================
-- 执行时间：2025-12-13
-- 版本：v1.0.0
-- 说明：为活动表添加浏览次数字段，支持智能推荐算法升级
-- ============================================

USE universityta;

-- 1. 添加浏览次数字段
ALTER TABLE t_zyhd 
ADD COLUMN LL_CS INT DEFAULT 0 COMMENT '浏览次数';

-- 2. 为现有活动初始化浏览次数（设为0）
UPDATE t_zyhd 
SET LL_CS = 0 
WHERE LL_CS IS NULL;

-- 3. 验证字段添加成功
SELECT 
    HD_BH AS '活动编号',
    HD_MC AS '活动名称',
    YBM_RS AS '报名人数',
    LL_CS AS '浏览次数'
FROM t_zyhd 
LIMIT 10;

-- 4. 查看表结构
DESCRIBE t_zyhd;

-- ============================================
-- 升级完成！
-- ============================================
-- 后续步骤：
-- 1. 重启后端服务
-- 2. 重新部署前端
-- 3. 测试浏览计数功能
-- 4. 验证推荐算法是否正常工作
-- ============================================