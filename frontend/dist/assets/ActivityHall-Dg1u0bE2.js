import{c as u,_ as st,r as m,q as at,s as lt,a as y,o as x,d as a,b as e,h as i,u as l,y as nt,R as ot,M as dt,e as o,t as d,V as rt,z as it,T as ct,F as T,A as ut,$ as pt,P as ht,B as mt,I as xt,i as S,C as vt,x as q,f as I,D as gt,g as P,E as ft,n as yt,p as bt,k as kt}from"./index-5g-Ygrkv.js";import{U as V,C as _t}from"./users-yFdIBWO8.js";import{A as wt}from"./Dashboard-Ex2JWQUR.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=u("BookOpenIcon",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=u("Building2Icon",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=u("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=u("CalendarXIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=u("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=u("FlagIcon",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=u("HeartPulseIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=u("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=u("LeafIcon",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=u("MapPinIcon",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=u("ShieldCheckIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=u("SparklesIcon",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Nt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},jt={class:"flex items-center gap-3"},At={class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-tr from-blue-600 via-cyan-500 to-emerald-500 text-white shadow"},Bt={class:"ml-auto"},Dt={class:"flex items-center text-slate-700 gap-2"},Lt={class:"text-[0.95rem]"},Ht={class:"flex items-center text-slate-700 gap-2"},Tt={class:"text-[0.95rem]"},qt={class:"flex items-center text-slate-700 gap-2"},Pt={class:"text-[0.95rem]"},Vt={class:"flex items-center gap-3 pt-2"},Ot={class:"p-6 flex items-center gap-3"},Ut={class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 text-white"},Et={key:0,class:"py-12 text-center text-slate-500"},Ft={key:1,class:"py-12 text-center text-red-500"},Zt={key:2,class:"mt-4 px-6 pb-6 grid grid-cols-1 gap-3"},Rt={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},Xt={class:"text-sm text-slate-700"},Jt={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},Yt={class:"text-sm text-slate-700"},Gt={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},Kt={class:"text-sm text-slate-700"},Qt={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},Wt={class:"text-sm text-slate-700"},te={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},ee={class:"text-sm text-slate-700"},se={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},ae={class:"text-sm text-slate-700"},le={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},ne={class:"text-sm text-slate-700"},oe={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},de={class:"text-sm text-slate-700"},re={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},ie={class:"text-sm text-slate-700"},ce={class:"flex items-start gap-2 bg-white/70 border border-slate-200 rounded-lg p-3"},ue={class:"text-sm text-slate-700"},pe={class:"px-6 pb-6 flex justify-end"},he={__name:"ActivityHall",setup(me){const N="http://localhost:8080",Z={Leaf:$t,BookOpen:O,HeartPulse:zt,Sparkles:$},R=n=>{const t=String(n||"");return/(环保|环境|垃圾|绿|生态)/.test(t)?"Leaf":/(教育|简历|咨询|大赛|毕业|迎新|开学|学院|课堂)/.test(t)?"BookOpen":/(医疗|献血|健康|体质|医|医院|心理)/.test(t)?"HeartPulse":"Sparkles"},v=m([]),j=m(!1),b=m(!1),k=m(!1),A=m(null),r=m(null),_=m(!1),B=m(""),D=m(""),X=async()=>{j.value=!0;try{const n=await q.get(`${N}/api/dashboard/activities`);if(n.data&&n.data.code===200){const t=Array.isArray(n.data.data)?n.data.data:[];v.value=t.map(s=>({id:Number(s.id),hdmc:String(s.hdmc||""),bmsj:String(s.bmsj||""),hdsj:String(s.hdsj||""),hddd:String(s.hddd||""),zyrs:String(s.zyrs||""),icon:R(s.hdmc)})),H()}else v.value=[]}catch{v.value=[]}finally{j.value=!1}},J=async n=>{A.value=n,b.value=!0,k.value=!0,r.value=null;try{const t=await q.get(`${N}/api/dashboard/activities/${n}`);t.data&&t.data.code===200?r.value=t.data.data||null:r.value=null}catch{r.value=null}finally{k.value=!1}},Y=n=>{B.value="报名成功",D.value=n.hdmc,_.value=!0},G=()=>{const n=new Date;return new Date(n.getTime()+(480+n.getTimezoneOffset())*6e4)},g=n=>{const t=n.match(/(?:(\d{4})-)?(\d{2})-(\d{2})\s+(\d{2}):(\d{2})/);if(!t)return null;const s=t[1]?Number(t[1]):void 0,h=Number(t[2]),c=Number(t[3]),p=Number(t[4]),f=Number(t[5]),M=s??new Date().getFullYear(),C=Date.UTC(M,h-1,c,p-8,f,0);return new Date(C)},L=n=>{if(!n)return[null,null];const t=String(n);if(t.includes("至")){const c=t.split("至"),p=g(c[0].trim()),f=g(c[1].trim());return[p,f]}const s=t.match(/(\d{4}-\d{2}-\d{2})\s+(\d{2}):(\d{2})\s*-\s*(\d{2}):(\d{2})/);if(s){const c=s[1],p=Number(s[2]),f=Number(s[3]),M=Number(s[4]),C=Number(s[5]),tt=g(`${c} ${String(p).padStart(2,"0")}:${String(f).padStart(2,"0")}`),et=g(`${c} ${String(M).padStart(2,"0")}:${String(C).padStart(2,"0")}`);return[tt,et]}return[g(t.trim()),null]},K={报名未开始:_t,报名进行中:Ct,报名已结束:St,活动进行中:wt,活动已结束:It},Q={报名未开始:"bg-slate-100 text-slate-700",报名进行中:"bg-green-100 text-green-700",报名已结束:"bg-amber-100 text-amber-700",活动进行中:"bg-emerald-100 text-emerald-700",活动已结束:"bg-slate-200 text-slate-700"},W=n=>{const t=G(),[s,h]=L(n.bmsj),[c,p]=L(n.hdsj);return s&&t<s?"报名未开始":s&&h&&t>=s&&t<=h?"报名进行中":h&&(!c||t<c)&&t>h?"报名已结束":c&&p&&t>=c&&t<=p?"活动进行中":p&&t>p?"活动已结束":"报名进行中"},H=()=>{v.value=v.value.map(n=>{const t=W(n);return{...n,status:t}})};let w=null;return at(async()=>{await X(),w=setInterval(H,6e4)}),lt(()=>{w&&clearInterval(w)}),(n,t)=>(x(),y(T,null,[a(l(ct),null,{default:i(()=>[a(l(nt),{class:"fixed top-4 right-4 z-50"}),a(l(ot),{open:_.value,"onUpdate:open":t[0]||(t[0]=s=>_.value=s),class:"bg-white border border-slate-200 rounded-md shadow-lg p-4 pr-10"},{default:i(()=>[a(l(dt),{class:"font-semibold text-slate-800"},{default:i(()=>[o(d(B.value),1)]),_:1}),a(l(rt),{class:"text-slate-500 text-sm"},{default:i(()=>[o(d(D.value),1)]),_:1}),a(l(it),{class:"absolute right-2 top-2 text-slate-400"},{default:i(()=>[...t[3]||(t[3]=[o("×",-1)])]),_:1})]),_:1},8,["open"])]),_:1}),e("div",Nt,[(x(!0),y(T,null,ut(v.value,s=>(x(),I(l(kt),{key:s.id,class:"group bg-white border border-slate-200/70 shadow-sm hover:shadow-lg rounded-2xl transition-all duration-300 hover:scale-[1.02] ring-1 ring-white/40 min-h-[260px] md:min-h-[300px]"},{default:i(()=>[a(l(gt),{class:"pb-3 px-6 pt-5"},{default:i(()=>[e("div",jt,[e("span",At,[(x(),I(P(Z[s.icon]),{class:"w-5 h-5"}))]),a(l(ft),{class:"text-slate-900 text-lg"},{default:i(()=>[o(d(s.hdmc),1)]),_:2},1024),e("div",Bt,[e("span",{class:yt(["inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium transition-colors duration-300",Q[s.status]])},[(x(),I(P(K[s.status]),{class:"w-3.5 h-3.5"})),e("span",null,d(s.status),1)],2)])])]),_:2},1024),a(l(bt),{class:"space-y-4 px-6 pb-6"},{default:i(()=>[e("div",Dt,[a(l(z),{class:"w-5 h-5 text-blue-600"}),e("span",Lt,d(s.bmsj),1)]),e("div",Ht,[a(l(E),{class:"w-5 h-5 text-emerald-600"}),e("span",Tt,d(s.hddd),1)]),e("div",qt,[a(l(V),{class:"w-5 h-5 text-cyan-600"}),e("span",Pt,d(s.zyrs),1)]),e("div",Vt,[a(S,{variant:"default",class:"group gap-2",onClick:h=>J(s.id)},{default:i(()=>[t[4]||(t[4]=e("span",null,"查看详情",-1)),a(l(U),{class:"w-4 h-4 transition-transform group-hover:translate-x-0.5"})]),_:1},8,["onClick"]),a(S,{variant:"secondary",class:"group",onClick:h=>Y(s)},{default:i(()=>[...t[5]||(t[5]=[o("报名",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),a(l(vt),{open:b.value,"onUpdate:open":t[2]||(t[2]=s=>b.value=s)},{default:i(()=>[a(l(pt),{class:"fixed inset-0 bg-slate-900/30 backdrop-blur-[6px]"}),a(l(ht),{class:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-2xl bg-white/80 backdrop-blur-xl border border-white/40 rounded-xl shadow-2xl p-0 z-50"},{default:i(()=>[t[18]||(t[18]=e("div",{class:"h-1.5 w-full bg-gradient-to-r from-blue-600 via-cyan-500 to-emerald-500 rounded-t-xl"},null,-1)),e("div",Ot,[e("span",Ut,[a(l(U),{class:"w-4 h-4"})]),a(l(mt),{class:"text-xl font-semibold text-slate-900"},{default:i(()=>[...t[6]||(t[6]=[o("活动详情",-1)])]),_:1})]),a(l(xt),{class:"px-6 -mt-2 text-slate-600 text-sm"},{default:i(()=>{var s;return[o("编号 "+d(((s=r.value)==null?void 0:s.id)??A.value),1)]}),_:1}),k.value?(x(),y("div",Et,"加载中...")):r.value?(x(),y("div",Zt,[e("div",Rt,[a(l($),{class:"w-4 h-4 text-indigo-600"}),e("div",Xt,[t[7]||(t[7]=e("span",{class:"font-medium"},"活动名称：",-1)),o(d(r.value.hdmc),1)])]),e("div",Jt,[a(l(z),{class:"w-4 h-4 text-blue-600"}),e("div",Yt,[t[8]||(t[8]=e("span",{class:"font-medium"},"报名时间：",-1)),o(d(r.value.bmsj),1)])]),e("div",Gt,[a(l(z),{class:"w-4 h-4 text-blue-600"}),e("div",Kt,[t[9]||(t[9]=e("span",{class:"font-medium"},"活动时间：",-1)),o(d(r.value.hdsj),1)])]),e("div",Qt,[a(l(E),{class:"w-4 h-4 text-emerald-600"}),e("div",Wt,[t[10]||(t[10]=e("span",{class:"font-medium"},"活动地点：",-1)),o(d(r.value.hddd),1)])]),e("div",te,[a(l(V),{class:"w-4 h-4 text-cyan-600"}),e("div",ee,[t[11]||(t[11]=e("span",{class:"font-medium"},"招募人数：",-1)),o(d(r.value.zyrs),1)])]),e("div",se,[a(l(O),{class:"w-4 h-4 text-purple-600"}),e("div",ae,[t[12]||(t[12]=e("span",{class:"font-medium"},"活动内容：",-1)),o(d(r.value.hdnr),1)])]),e("div",le,[a(l(F),{class:"w-4 h-4 text-rose-600"}),e("div",ne,[t[13]||(t[13]=e("span",{class:"font-medium"},"活动需求条件：",-1)),o(d(r.value.hdxq),1)])]),e("div",oe,[a(l(F),{class:"w-4 h-4 text-rose-600"}),e("div",de,[t[14]||(t[14]=e("span",{class:"font-medium"},"活动保障：",-1)),o(d(r.value.hdbz),1)])]),e("div",re,[a(l(Mt),{class:"w-4 h-4 text-slate-700"}),e("div",ie,[t[15]||(t[15]=e("span",{class:"font-medium"},"发起单位：",-1)),o(d(r.value.hdfqdw),1)])]),e("div",ce,[a(l($),{class:"w-4 h-4 text-indigo-600"}),e("div",ue,[t[16]||(t[16]=e("span",{class:"font-medium"},"状态：",-1)),o(d(r.value.hdzt),1)])])])):(x(),y("div",Ft,"未获取到详情")),e("div",pe,[a(S,{variant:"outline",onClick:t[1]||(t[1]=s=>b.value=!1)},{default:i(()=>[...t[17]||(t[17]=[o("关闭",-1)])]),_:1})])]),_:1})]),_:1},8,["open"])],64))}},fe=st(he,[["__scopeId","data-v-a10ca962"]]);export{fe as default};
